{{define "heatmap_grid"}}
<div class="overflow-x-auto overflow-y-visible py-4">
    <div class="flex gap-8">
        {{range $month := .Months}}
        <div class="min-w-[200px]">
            <h3 class="text-base font-semibold text-gray-700 mb-3 text-center">
                {{$month.MonthName}} {{$month.Year}}
            </h3>
            <div class="grid grid-cols-7 gap-1.5">
                {{range $day := $month.Days}}
                {{if gt $day.Load 0.0}}
                <div class="heatmap-cell w-6 h-6 rounded cursor-pointer relative group {{if $day.IsToday}}ring-2 ring-blue-600{{end}}"
                    style="background-color: {{$day.Color}}"
                    onclick="showDayDetails('{{$.EntityID}}', '{{$day.DateStr}}')">
                    <div
                        class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 whitespace-nowrap z-50 pointer-events-none transition-opacity duration-200">
                        <div class="font-semibold">{{$day.DateStr}}</div>
                        <div>Total Load: {{printf "%.1f" $day.Load}}</div>
                    </div>
                </div>
                {{else}}
                <div class="heatmap-cell w-6 h-6 rounded relative group {{if $day.IsToday}}ring-2 ring-blue-600{{end}}"
                    style="background-color: {{$day.Color}}">
                    <div
                        class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 whitespace-nowrap z-50 pointer-events-none transition-opacity duration-200">
                        <div class="font-semibold">{{$day.DateStr}}</div>
                        <div>No Load</div>
                    </div>
                </div>
                {{end}}
                {{end}}
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}